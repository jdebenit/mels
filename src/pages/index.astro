---
import Layout from "../layouts/Layout.astro";
---

<Layout title="MELS // SYSTEM ACCESS">
	<div class="hero">
		<div class="logo-container">
			<img
				src={import.meta.env.BASE_URL === "/"
					? "/mutantes-en-la-sombra.png"
					: import.meta.env.BASE_URL + "/mutantes-en-la-sombra.png"}
				alt="Mutantes en la Sombra"
				class="main-logo"
			/>
			<div class="scan-line"></div>
		</div>

		<div class="protocol-badge">
			<img
				src={import.meta.env.BASE_URL === "/"
					? "/Mutant3s-fiht-protocol.png"
					: import.meta.env.BASE_URL + "/Mutant3s-fiht-protocol.png"}
				alt="Fight Protocol"
			/>
			<p>
				CLEARANCE: <span style="color: var(--color-alert)">LEVEL 5</span
				>
			</p>
		</div>

		<div class="panel login-panel">
			<h2>&gt; SYSTEM_LOGIN</h2>
			<p>ENTER CREDENTIALS TO ACCESS DATABASE.</p>

			<div class="terminal-output">
				<p>> CONNECTING TO SECURE SERVER...</p>
				<p>
					> <span style="color: var(--color-accent)"
						>CONNECTION ESTABLISHED.</span
					>
				</p>
				<p>> VERIFYING BIOMETRICS...</p>
				<p>> <span class="text-glitch">ACCESS GRANTED</span>.</p>
				<br />
				<p>WARNING: UNAUTHORIZED ACCESS IS A FELONY.</p>
			</div>

			<div class="terminal-input-line">
				<span class="prompt-char">&gt;</span>
				<input
					type="text"
					id="password-input"
					autocomplete="off"
					autofocus
				/>
			</div>
		</div>
	</div>

	<div class="decorations">
		<div class="corner top-left"></div>
		<div class="corner top-right"></div>
		<div class="corner bottom-left"></div>
		<div class="corner bottom-right"></div>
	</div>

	<style>
		.hero {
			display: grid;
			grid-template-columns: 1fr;
			gap: 2rem;
			justify-items: center;
			text-align: center;
			margin-top: 5vh;
			animation: fadeIn 1s ease-out;
		}

		.logo-container {
			position: relative;
			max-width: 600px;
			width: 100%;
			filter: drop-shadow(0 0 20px rgba(0, 255, 65, 0.3));
		}

		.main-logo {
			width: 100%;
			height: auto;
		}

		.scan-line {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 2px;
			background: var(--color-accent);
			box-shadow: 0 0 10px var(--color-accent);
			animation: scan 3s linear infinite;
			opacity: 0.7;
		}

		.protocol-badge {
			position: absolute;
			top: 2rem;
			right: 2rem;
			width: 150px;
			text-align: center;
			font-size: 0.8rem;
			opacity: 0.8;
			transform: rotate(5deg);
		}

		.protocol-badge img {
			width: 100%;
			filter: sepia(100%) hue-rotate(50deg) saturate(300%) contrast(1.2); /* Green tint */
		}

		.login-panel {
			max-width: 500px;
			width: 100%;
			margin-top: 2rem;
			background: rgba(0, 0, 0, 0.8);
			position: relative;
		}

		.terminal-input-line {
			display: flex;
			align-items: center;
			background: transparent;
			border: none;
			color: var(--color-accent);
			font-family: var(--font-mono);
			font-size: 1.2rem;
			width: 100%;
			margin-top: 1rem;
		}

		.prompt-char {
			margin-right: 10px;
			color: var(--color-accent);
			animation: blink 1s step-end infinite;
		}

		#password-input {
			background: transparent;
			border: none;
			color: var(--color-accent);
			font-family: var(--font-mono);
			font-size: 1.2rem;
			outline: none;
			width: 100%;
			text-transform: uppercase;
		}

		/* Nedry Modal */
		.nedry-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: black;
			z-index: 9999;
			justify-content: center;
			align-items: center;
			flex-direction: column;
		}

		.nedry-modal.active {
			display: flex;
		}

		.nedry-container {
			text-align: center;
			color: #fff;
			font-family: "Courier New", monospace;
		}

		.nedry-container img {
			max-width: 80%;
			border: 4px solid white;
			margin-bottom: 20px;
		}

		.nedry-text {
			font-size: 2rem;
			font-weight: bold;
			text-transform: uppercase;
			animation: flash 0.5s infinite;
		}

		@keyframes blink {
			50% {
				opacity: 0;
			}
		}

		@keyframes flash {
			0%,
			100% {
				color: #fff;
			}
			50% {
				color: red;
			}
		}

		.terminal-output {
			text-align: left;
			font-family: var(--font-mono);
			font-size: 0.9rem;
			margin: 1rem 0;
			border-left: 2px solid var(--color-secondary);
			padding-left: 1rem;
			min-height: 150px;
		}

		.actions {
			display: flex;
			gap: 1rem;
			justify-content: center;
			margin-top: 2rem;
		}

		@keyframes scan {
			0% {
				top: 0;
				opacity: 0;
			}
			10% {
				opacity: 1;
			}
			90% {
				opacity: 1;
			}
			100% {
				top: 100%;
				opacity: 0;
			}
		}

		@keyframes fadeIn {
			from {
				opacity: 0;
				transform: translateY(20px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		/* Corner Markers */
		.decorations {
			position: fixed;
			top: 20px;
			left: 20px;
			right: 20px;
			bottom: 40px;
			pointer-events: none;
			z-index: 50;
		}

		.corner {
			position: absolute;
			width: 50px;
			height: 50px;
			border: 2px solid var(--color-accent);
		}

		.top-left {
			top: 0;
			left: 0;
			border-right: none;
			border-bottom: none;
		}
		.top-right {
			top: 0;
			right: 0;
			border-left: none;
			border-bottom: none;
		}
		.bottom-left {
			bottom: 0;
			left: 0;
			border-right: none;
			border-top: none;
		}
		.bottom-right {
			bottom: 0;
			right: 0;
			border-left: none;
			border-top: none;
		}

		@media (max-width: 768px) {
			.protocol-badge {
				position: relative;
				top: auto;
				right: auto;
				margin-bottom: 2rem;
				transform: none;
			}

			.decorations {
				display: none;
			}
		}
	</style>
	<!-- Nedry Modal -->
	<div id="nedry-modal" class="nedry-modal">
		<div class="nedry-container">
			<img
				src="m-you-didnt-say-the-magic-word.gif"
				alt="Nedry Jurassic Park"
			/>
			<div class="nedry-text">
				AH AH AH!<br />
				YOU DIDN'T SAY THE MAGIC WORD!
			</div>
		</div>
	</div>

	<script>
		const input = document.getElementById(
			"password-input",
		) as HTMLInputElement;
		const modal = document.getElementById("nedry-modal");

		if (input && modal) {
			input.addEventListener("keydown", (e) => {
				if (e.key === "Enter") {
					const value = input.value.trim().toLowerCase();
					if (value === "mutis") {
						// Success
						window.location.href = "/universo";
					} else {
						// Failure
						modal.classList.add("active");
						input.value = "";
						// Optional: Hide modal after a few seconds or let them click to close
						setTimeout(() => {
							modal.classList.remove("active");
							input.focus();
						}, 5000); // 5 seconds of shame
					}
				}
			});

			// Close modal on click
			modal.addEventListener("click", () => {
				modal.classList.remove("active");
				input.focus();
			});
		}
	</script>
</Layout>
